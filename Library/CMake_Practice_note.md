# Notes for CMake Practice

### RPATH Handling
When we linked a local shared library when creating a executable, the executable generated by "make" command would work.
However the one copied by running "make install" would give errors like:
```
error while loading shared libraries: libwx_gtk2u_core-2.9.so.1: cannot open shared object file: No such file or directory
```

The reason for this issue is explained here:
[RPATH](https://gitlab.kitware.com/cmake/community/-/wikis/doc/cmake/RPATH-handling#common-questions)

The solution to this issue is to set RPATH related variables.
One could set global variables in the top-level CMakeLists.txt:
```cmake
SET (CMAKE_INSTALL_RPATH_USE_LINK_PATH TRUE)
SET (CMAKE_INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/lib"})
```
Or set these variables for individual targets:
```cmake
SET_TARGET_PROPERTIES(hello PROPERTIES
                      INSTALL_RPATH_USE_LINK_PATH TRUE
                      INSTALL_RPATH "${CMAKE_INSTALL_PREFIX}/lib")
```
